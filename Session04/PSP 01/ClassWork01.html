<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="stylesheet.css">
    <script src="ClassWork01.js"></script>
</head>
<body>

<p>Click the button to create a File Upload Button.</p>

<input type="file" id="myFile">
<br>
<textarea style="width:150px;height: 200px" id="output"></textarea>
<br>
<button type="button" onclick="createTable()" id="myCalculateBtn">Calculate Mean & Standard Deviation</button>
<br>

<div id="test">

</div>

<script>
var input = document.getElementById("myFile");
var output = document.getElementById("output");

var sumArray = [];
input.addEventListener("change", function () {
    if (this.files && this.files[0]) {
        var myFile = this.files[0];
        var reader = new FileReader();
        
        reader.addEventListener('load', function (e) {
            output.textContent = e.target.result;
        });
        
        reader.readAsBinaryString(myFile);
    }
});

function createTable() {
    // displaying lists of numbers and sum
    var i=0, j=0, rowEl=null,
    tableEl = document.createElement("table");
    var lines = document.getElementById("output").innerHTML.split('\r\n');
    var sum = 0;
    var stddiv = 0;
    var calculated_stddiv = 0;
    for (i=0; i < 10; i++) {
        rowEl = tableEl.insertRow();  // DOM method for creating table rows
        rowEl.insertCell().textContent = i + 1;
        rowEl.insertCell().textContent = lines[i];
        sum += parseFloat(lines[i]);
    }
    // sum part
    rowEl = tableEl.insertRow();
    rowEl.insertCell().textContent = "SUM";
    rowEl.insertCell().textContent = sum;
    sumArray.push(sum);

    // standard deviation
    
    for (j =0; j < 10; j++){
        stddiv += Math.pow((parseFloat(lines[j] - sum)),2);
    }
    // console.log(stddiv);
    calculated_stddiv = Math.sqrt(stddiv/9);
    // console.log(calculated_stddiv);

    rowEl = tableEl.insertRow();
    rowEl.insertCell().textContent = "SD";
    // print only upto 4decimal points
    rowEl.insertCell().textContent = calculated_stddiv.toFixed(4);
    test.appendChild(tableEl);
}

</script>

</body>
</html>
